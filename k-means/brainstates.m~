function y = brainstates(datastruct)
%this function computes the k-means of dynamic wSMI
%matrices generated by dynamic-wsmi. 

%datastruct must be a struct with the following fields:
%import_path: path for extracting the mat files
%export_path: path for exporting the clustering result
%k: number of centroids
%distance: type of distance (euclidian, cityblock, etc)
%replicates: number of replicates
%subsample_factor: a positive integer n will keep
%1 every n windows and drop the rest

    import_path = datastruct.import_path;
    export_path = datastruct.export_path;
    centroids = datastruct.k;
    distance_type = datastruct.distance;
    replicates = datastruct.replicates;
    subsampling = datastruct.subsample_factor;

    files = dir(strcat(import_path, '/*.mat'));
    filenames = {files(:).name};
    
    
    for i=1:length(filenames)
       display(strcat('Processing ...', filenames{i}))
       
       load(strcat(import_path, '/', filenames{i}), 'data');
       n_windows = size(data, 1);
       n_channels = size(data, 2);
       datanew = reshape(data, n_windows, n_channels*n_channels);
        
    end
    
    

end

